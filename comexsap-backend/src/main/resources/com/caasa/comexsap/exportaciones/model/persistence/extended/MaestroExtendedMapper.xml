<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.caasa.comexsap.exportaciones.model.persistence.extended.MaestroExtendedMapper">

  <resultMap id="almacenMap" type="com.caasa.comexsap.exportaciones.model.to.AlmacenTO">
    <id column="ALMAN_ID" jdbcType="NUMERIC" property="id" />
    <result column="ALMAN_IDCENTRO" jdbcType="NUMERIC" property="idCentro" />
    <result column="ALMAV_DESCRIPCION" jdbcType="VARCHAR" property="descripcion" />
    <result column="ALMAV_CODIGOSAP" jdbcType="VARCHAR" property="codigoSap" />
    <result column="ALMAV_USUARIOCREACION" jdbcType="VARCHAR" property="usuarioCreacion" />
    <result column="ALMAD_FECHACREACION" jdbcType="TIMESTAMP" property="fechacreacion" />
    <result column="ALMAV_USUARIOMODIFICACION" jdbcType="VARCHAR" property="usuariomodificacion" />
    <result column="ALMAD_FECHAMODIFICACION" jdbcType="TIMESTAMP" property="fechamodificacion" />
    <result column="ALMAN_ESTADO" jdbcType="NUMERIC" property="estado" />
  </resultMap> 
  <resultMap id="centroMap" type="com.caasa.comexsap.exportaciones.model.to.CentroTO">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="CENTN_ID" jdbcType="NUMERIC" property="id" />
    <result column="CENTV_DESCRIPCION" jdbcType="VARCHAR" property="descripcion" />
    <result column="CENTV_CODIGOSAP" jdbcType="VARCHAR" property="codigoSap" />
    <result column="CENTV_USUARIOCREACION" jdbcType="VARCHAR" property="usuarioCreacion" />
    <result column="CENTD_FECHACREACION" jdbcType="TIMESTAMP" property="fechacreacion" />
    <result column="CENTV_USUARIOMODIFICACION" jdbcType="VARCHAR" property="usuariomodificacion" />
    <result column="CENTD_FECHAMODIFICACION" jdbcType="TIMESTAMP" property="fechamodificacion" />
    <result column="CENTN_ESTADO" jdbcType="NUMERIC" property="estado" />
  </resultMap>     
	<select id="listarAlmacen" resultMap="almacenMap" parameterType="java.util.Map">	  
		SELECT 
			ALMAN_ID,
			ALMAN_IDCENTRO,
			ALMAV_CODIGOSAP,
			ALMAV_DESCRIPCION
		FROM COMEXST_ALMACEN
		WHERE ALMAN_ESTADO = 1 
		AND ALMAN_IDCENTRO = #{idCentro}
	</select>
	<select id="listarCentro" resultMap="centroMap" parameterType="String">	  
		SELECT 
		    CENTN_ID,
		    CENTV_CODIGOSAP,
		    CENTV_DESCRIPCION
	    FROM COMEXST_CENTRO
	    WHERE CENTN_ESTADO = 1
	    <if test="buscar != null and buscar != ''">
			AND UPPER(CONCAT(CENTV_CODIGOSAP || ' - ', CENTV_DESCRIPCION)) LIKE '%' || UPPER(#{buscar}) || '%'
		</if>
	 </select>
</mapper>