<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-body">
        <form [formGroup]="servicioForm" novalidate (keydown.enter)="$event.preventDefault()">
          <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="comex-tabs nav-tabs">
            <li [ngbNavItem]="1">
              <a ngbNavLink><i class="pi pi-file"></i> Maestro de Servicio</a>
              <ng-template ngbNavContent>
                <div class="row container-title">
                  <div class="col-sm-6 title">
                    <label class="title-line"></label>Servicio
                  </div>
                  <div class="col-sm-6 mt-2 mt-sm-0 d-flex justify-content-end">
                    <button class="btn btn-info" (click)="guardar()">Guardar</button>
                  </div>
                </div>

                <div class="comex-container-maestro">
                  <div class="row">
                    <div class="col-sm-6 col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label">Servicio/Concepto<span class="required-asterisk">*</span></label>
                        <input type="text" class="form-control" placeholder="Servicio/Concepto" formControlName="concepto">
                        <div *ngIf="servicioForm.controls['concepto'].invalid && servicioForm.controls['concepto'].touched">
                          <div *ngIf="servicioForm.controls['concepto'].errors.required" class="invalid-feedback">Este campo es requerido</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label">Descripción<span class="required-asterisk">*</span></label>
                        <input type="text" class="form-control" placeholder="Descripción" formControlName="descripcion">
                        <div *ngIf="servicioForm.controls['descripcion'].invalid && servicioForm.controls['descripcion'].touched">
                          <div *ngIf="servicioForm.controls['descripcion'].errors.required" class="invalid-feedback">Este campo es requerido</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label">Tipo Transporte<span class="required-asterisk">*</span></label>
                        <ng-select
                          formControlName="idTipoTransporte"
                          [items]="tiposTransporte"
                          bindLabel="descripcionLarga"
                          bindValue="id"
                          placeholder="Buscar código o nombre">
                        </ng-select>
                        <div *ngIf="servicioForm.controls['idTipoTransporte'].invalid && servicioForm.controls['idTipoTransporte'].touched">
                          <div *ngIf="servicioForm.controls['idTipoTransporte'].errors.required" class="invalid-feedback">Este campo es requerido</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label">Despacho<span class="required-asterisk">*</span></label>
                        <ng-select
                          formControlName="idDespacho"
                          [items]="despachos"
                          bindLabel="descripcionLarga"
                          bindValue="id"
                          placeholder="Buscar código o nombre">
                        </ng-select>
                        <div *ngIf="servicioForm.controls['idDespacho'].invalid && servicioForm.controls['idDespacho'].touched">
                          <div *ngIf="servicioForm.controls['idDespacho'].errors.required" class="invalid-feedback">Este campo es requerido</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label">Moneda<span class="required-asterisk">*</span></label>
                        <ng-select
                          formControlName="idMoneda"
                          [items]="monedas"
                          bindLabel="descripcionLarga"
                          bindValue="id"
                          placeholder="Buscar código o nombre">
                        </ng-select>
                        <div *ngIf="servicioForm.controls['idMoneda'].invalid && servicioForm.controls['idMoneda'].touched">
                          <div *ngIf="servicioForm.controls['idMoneda'].errors.required" class="invalid-feedback">Este campo es requerido</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label">Precio<span class="required-asterisk">*</span></label>
                        <input type="number" class="form-control" min="0" formControlName="precio" placeholder="Ingrese precio">
                        <div *ngIf="servicioForm.controls['precio'].invalid && servicioForm.controls['precio'].touched">
                          <div *ngIf="servicioForm.controls['precio'].errors.required" class="invalid-feedback">Este campo es requerido</div>
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                      <div class="form-group">
                        <label class="form-control-label">Unidad<span class="required-asterisk">*</span></label>
                        <input type="text" class="form-control" placeholder="Unidad" formControlName="unidad">
                        <div *ngIf="servicioForm.controls['unidad'].invalid && servicioForm.controls['unidad'].touched">
                          <div *ngIf="servicioForm.controls['unidad'].errors.required" class="invalid-feedback">Este campo es requerido</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </li>
          </ul>
          <div [ngbNavOutlet]="nav" class="mt-2"></div>
        </form>

        <label class="required-field"><span class="required-asterisk">*</span> Campos Obligatorios</label>
      </div>
    </div>
  </div>
</div>

<ng-template #modalConfirmacionExitosa let-modalConfirmacionExitosa>
  <div class="modal-header">
    <h4 class="modal-title">Servicio</h4>
  </div>
  <div class="modal-body">
    <p>El servicio se guardó de manera exitosa.</p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="irAlListado(); modalConfirmacionExitosa.close();">Entendido</button>
  </div>
</ng-template>

<p-toast position="top-right" [baseZIndex]="9000" autoZIndex="false"></p-toast>

<router-outlet></router-outlet>
